{"version":3,"sources":["./src/app/pages/driver-stats-page/driver-stats.component.html","./src/app/pages/driver-stats-page/driver-stats-routing.module.ts","./src/app/pages/driver-stats-page/driver-stats.component.scss","./src/app/pages/driver-stats-page/driver-stats.component.ts","./src/app/pages/driver-stats-page/driver-stats.module.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,ydAA0Z,iBAAiB,gDAAgD,oBAAoB,m0BAAm0B,iBAAiB,gDAAgD,oBAAoB,wtBAAwtB,iBAAiB,gEAAgE,cAAc,GAAG,gBAAgB,GAAG,gBAAgB,6D;;;;;;;;;;;;;;;;;;;ACA1sE;AACc;AAEO;AAE9D,MAAM,MAAM,GAAW;IACnB;QACI,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4EAAoB;QAC/B,IAAI,EAAE;YACF,KAAK,EAAE,OAAO;SACjB;KACJ;CACJ,CAAC;AAMF,IAAa,wBAAwB,GAArC,MAAa,wBAAwB;CAAI;AAA5B,wBAAwB;IAJpC,8DAAQ,CAAC;QACN,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KAC1B,CAAC;GACW,wBAAwB,CAAI;AAAJ;;;;;;;;;;;;;ACnBrC;AAAe,6GAA8C,2K;;;;;;;;;;;;;;;;;;;;;;;ACAX;AACS;AACT;AACX;AAGL;AACyC;AAS3E,IAAa,oBAAoB,GAAjC,MAAa,oBAAoB;IA8G/B,YAAoB,IAAgB,EAAU,MAAc;QAAxC,SAAI,GAAJ,IAAI,CAAY;QAAU,WAAM,GAAN,MAAM,CAAQ;QAzG5D,iBAAY,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QACpC,mBAAc,GAAG,CAAC,cAAc,EAAE,cAAc,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,mBAAmB,CAAC,CAAC;QAC5G,iBAAY,GAAG,UAAU,CAAC;QAC1B,oBAAe,GAAG;YAChB,SAAS,EAAE,IAAI;YACf,UAAU,EAAE,IAAI;YAChB,eAAe,EAAE,KAAK;SACvB;QAED,iBAAY,GAAc,KAAK,CAAC;QAChC,iBAAY,GAAkB;YAC5B,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC5B,MAAM,EAAE,CAAC,mBAAmB,EAAE,cAAc,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,cAAc,CAAC;SACnG;QACD,oBAAe,GAAqB;YAClC,KAAK,EAAE;gBACL,QAAQ,EAAE,KAAK;aAChB;YACD,MAAM,EAAE,GAAG;SACZ,CAAC;QACF,mBAAc,GAAe;YAC3B,IAAI,EAAE,CAAC,IAAI,EAAE,EAAE;gBACb,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;oBACvB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;wBACnB,EAAE,EAA6B;4BAC7B,GAAG,EAAE,MAAM;4BACX,IAAI,EAAE,IAAI,CAAC,EAAE;4BACb,EAAE,EAAE,IAAI,CAAC,EAAE;4BACX,MAAM,EAAE,aAAa;yBACtB;qBACF,CAAC,CAAC;iBACJ;YACH,CAAC;SACF,CAAC;QAEF,kBAAa,GAAG;YACd;gBACE,UAAU,EAAE,mBAAmB;gBAC/B,aAAa,EAAE,IAAI;aACpB;YACD;gBACE,UAAU,EAAE,cAAc;gBAC1B,aAAa,EAAE,IAAI;aACpB;YACD;gBACE,UAAU,EAAE,gBAAgB;gBAC5B,aAAa,EAAE,IAAI;aACpB;YACD;gBACE,UAAU,EAAE,iBAAiB;gBAC7B,aAAa,EAAE,GAAG;aACnB;YACD;gBACE,UAAU,EAAE,cAAc;gBAC1B,aAAa,EAAE,GAAG;aACnB;SACF,CAAC;QAEF,mBAAc,GAAG;YACf;gBACE,UAAU,EAAE,cAAc;gBAC1B,aAAa,EAAE,IAAI;aACpB;YACD;gBACE,UAAU,EAAE,cAAc;gBAC1B,aAAa,EAAE,IAAI;aACpB;YACD;gBACE,UAAU,EAAE,iBAAiB;gBAC7B,aAAa,EAAE,IAAI;aACpB;YACD;gBACE,UAAU,EAAE,gBAAgB;gBAC5B,aAAa,EAAE,IAAI;aACpB;YACD;gBACE,UAAU,EAAE,mBAAmB;gBAC/B,aAAa,EAAE,IAAI;aACpB;SACF,CAAC;QAEF,oBAAe,GAAG;QAChB,IAAI;QACJ,gCAAgC;QAChC,2BAA2B;QAC3B,KAAK;QACL,IAAI;QACJ,qCAAqC;QACrC,2BAA2B;QAC3B,KAAK;QACL,IAAI;QACJ,gCAAgC;QAChC,2BAA2B;QAC3B,KAAK;QACL,IAAI;QACJ,kCAAkC;QAClC,2BAA2B;QAC3B,KAAK;QACL,IAAI;QACJ,iCAAiC;QACjC,2BAA2B;QAC3B,KAAK;SACN,CAAC;QAIA,IAAI,CAAC,IAAI,GAAG,IAAI,wEAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACpD,IAAI,CAAC,aAAa,GAAG,IAAI,wFAAa,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/D,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;YACnD,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACd,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBACpB,IAAI,KAAK,GAAG,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC;gBACzC,IAAI,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC;gBAC7C,IAAI,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC;gBAC7C,IAAI,IAAI,GAAG;oBACT,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ;oBACzD,KAAK,EAAE,KAAK;oBACZ,OAAO,EAAE,OAAO;oBAChB,OAAO,EAAE,OAAO;iBACjB;gBACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAClC,CAAC,CAAC,CAAC;YACH,WAAW,CAAC,GAAG,EAAE;gBACf,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;oBACrC,IAAG,OAAO,CAAC,OAAO,GAAG,EAAE,EAAC;wBACtB,OAAO,CAAC,OAAO,EAAE,CAAC;qBACnB;yBACI,IAAG,OAAO,CAAC,OAAO,GAAE,EAAE,EAAE;wBAC3B,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;wBACpB,OAAO,CAAC,OAAO,EAAE,CAAC;qBACnB;yBACG;wBACF,OAAO,CAAC,KAAK,EAAE,CAAC;wBAChB,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;wBACpB,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;qBACrB;gBACH,CAAC,CAAC;YACJ,CAAC,EAAC,IAAI,CAAC;QACT,CAAC,CAAC;QACF,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;QACzD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;YACvD,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACd,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBACpB,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC5D,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;YACH,IAAI,OAAO,GAAG,IAAI,qCAAK,CAAC,IAAI,CAAC,GAAG,EAAE;gBAChC,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE;oBACF,MAAM,EAAE,KAAK;oBACb,QAAQ,EAAE,CAAC;4BACP,KAAK,EAAE,aAAa;4BACpB,IAAI,EAAE,IAAI;4BACV,eAAe,EAAE;gCACb,QAAQ;gCACR,QAAQ;gCACR,QAAQ;gCACR,sBAAsB;gCACtB,sBAAsB;6BACzB;4BACD,WAAW,EAAE,CAAC;yBACjB,CAAC;iBACL;gBACD,OAAO,EAAE;oBACT,UAAU,EAAE,IAAI;iBACf;aACF,CAAC,CAAC;QACL,CAAC,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;YACtD,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACd,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBACpB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7D,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,GAAG;gBAClB,MAAM,EAAC,CAAC,MAAM,CAAC;gBACf,MAAM,EAAE,MAAM;aACf;QACH,CAAC,CAAC;IACJ,CAAC;CACF;;YAnF2B,+DAAU;YAAkB,sDAAM;;AA9GjD,oBAAoB;IANhC,+DAAS,CAAC;QACT,+CAA+C;QAC/C,QAAQ,EAAE,eAAe;QACzB,mPAA4C;;KAE7C,CAAC;2EA+G0B,+DAAU,EAAkB,sDAAM;GA9GjD,oBAAoB,CAiMhC;AAjMgC;;;;;;;;;;;;;;;;;;;;;;;;AChBQ;AACM;AAC0B;AACT;AACnB;AACH;AACa;AAgBvD,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;CAAI;AAArB,iBAAiB;IAd7B,8DAAQ,CAAC;QACN,OAAO,EAAE;YACL,4DAAY;YACZ,qFAAwB;YACxB,0DAAc;YACd,uDAAY;YACZ,oEAAe;SAClB;QACD,OAAO,EAAE,EAAE;QACX,YAAY,EAAE;YACV,4EAAoB;SACvB;QACD,SAAS,EAAE,EAAE;KAChB,CAAC;GACW,iBAAiB,CAAI;AAAJ","file":"pages-driver-stats-page-driver-stats-module-es2015.js","sourcesContent":["export default \"<div class=\\\"row text-left\\\">\\n    <div class=\\\"col-sm-12\\\">\\n      <div class=\\\"content-header\\\">Drivers</div>\\n    </div>\\n</div>\\n\\n<!-- <div class=\\\"content-header\\\">Today's top Drivers</div>\\n<div class=\\\"row text-left\\\">\\n    <div *ngFor=\\\"let driver of dayTopDrivers\\\" class=\\\"col-sm-6\\\">\\n        <div class=\\\"card\\\">\\n            <div class=\\\"card-body\\\">\\n                <h5 class=\\\"card-title\\\">{{driver.fullName}}</h5>\\n                <p class=\\\"card-text\\\">{{driver.orderAmount}} deliveries made today!</p>\\n            </div>\\n        </div>\\n    </div>\\n</div> -->\\n\\n<div class=\\\"card\\\">\\n    <div class=\\\"card-header\\\">\\n        <h4 class=\\\"card-title\\\">Today's top Drivers</h4>\\n    </div>\\n    <div class=\\\"card-content\\\">\\n        <div class=\\\"card-body mt-2\\\">\\n            <x-chartist\\n                [type]=\\\"barChartType\\\"\\n                [data]=\\\"barChartData\\\"\\n                [options]=\\\"barChartOptions\\\"\\n                [events]=\\\"barChartEvents\\\"\\n            ></x-chartist>\\n        </div>\\n    </div>\\n</div>\\n\\n<!-- <div class=\\\"content-header\\\">This week's top Drivers</div>\\n<div class=\\\"row text-left\\\">\\n    <div *ngFor=\\\"let driver of weekTopDrivers\\\" class=\\\"col-sm-6\\\">\\n        <div class=\\\"card\\\">\\n            <div class=\\\"card-body\\\">\\n                <h5 class=\\\"card-title\\\">{{driver.fullName}}</h5>\\n                <p class=\\\"card-text\\\">{{driver.orderAmount}} deliveries made today!</p>\\n            </div>\\n        </div>\\n    </div>\\n</div> -->\\n\\n<div class=\\\"card\\\">\\n    <div class=\\\"card-header\\\">\\n        <h4 class=\\\"card-title\\\">This week's top Drivers</h4>\\n    </div>\\n    <div class=\\\"card-content\\\">\\n        <div class=\\\"card-body\\\">\\n            <div class=\\\"chart\\\">\\n                <canvas id=\\\"driversPieChart\\\" height=\\\"100\\\"></canvas>\\n                </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"content-header\\\">Inactive Drivers</div>\\n<div class=\\\"row text-left\\\">\\n    <div *ngFor=\\\"let driver of inactiveDrivers\\\" class=\\\"col-sm-6\\\">\\n        <div class=\\\"card\\\">\\n            <div class=\\\"card-body\\\">\\n                <h5 class=\\\"card-title\\\">{{driver.fullName}}</h5>\\n                <p class=\\\"card-text\\\">Inactive during {{driver.hours}}:{{driver.minutes}}:{{driver.seconds}}</p>\\n            </div>\\n        </div>\\n    </div>\\n</div>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport {DriverStatsComponent} from './driver-stats.component';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: DriverStatsComponent,\n        data: {\n            title: 'Login'\n        }\n    }\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n})\nexport class DriverStatsRoutingModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RyaXZlci1zdGF0cy1wYWdlL2RyaXZlci1zdGF0cy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'app/shared/auth/auth.service';\nimport { HttpClient } from '@angular/common/http';\nimport {Router} from '@angular/router';\nimport { ChartType, ChartEvent } from 'ng-chartist';\nimport { IChartistData, IBarChartOptions, IChartistAnimationOptions } from 'chartist';\nimport * as Chart from 'chart.js';\nimport { DriverService } from 'app/shared/services/drivers/driver.service';\nimport { TimeInterval } from 'rxjs/internal/operators/timeInterval';\n\n@Component({\n  // tslint:disable-next-line: component-selector\n  selector: 'drivers-stats',\n  templateUrl: './driver-stats.component.html',\n  styleUrls: ['./driver-stats.component.scss']\n})\nexport class DriverStatsComponent implements OnInit {\n  private driverService;\n  canvas: any;\n  ctx: any;\n\n  pieChartData = [34, 32, 29, 27, 21];\n  pieChartLabels = ['Jose Ramirez', 'Alberto Peña', 'Carolina Altman', 'Florencia Díaz', 'Leandro Dominguez'];\n  pieChartType = 'doughnut';\n  pieChartOptions = {\n    animation: true,\n    responsive: true,\n    mainAspectRatio: false,\n  }\n\n  barChartType: ChartType = 'Bar';\n  barChartData: IChartistData = {\n    series: [[12, 11, 11, 6, 3]],\n    labels: ['Leandro Dominguez', 'Alberto Peña', 'Florencia Díaz', 'Carolina Altman', 'Jose Ramirez']\n  }\n  barChartOptions: IBarChartOptions = {\n    axisX: {\n      showGrid: false\n    },\n    height: 300\n  };\n  barChartEvents: ChartEvent = {\n    draw: (data) => {\n      if (data.type === 'bar') {\n        data.element.animate({\n          y2: <IChartistAnimationOptions>{\n            dur: '0.5s',\n            from: data.y1,\n            to: data.y2,\n            easing: 'easeOutQuad'\n          }\n        });\n      }\n    }\n  };\n\n  dayTopDrivers = [\n    {\n      'fullName': 'Leandro Dominguez',\n      'orderAmount': '12',\n    },\n    {\n      'fullName': 'Alberto Peña',\n      'orderAmount': '11',\n    },\n    {\n      'fullName': 'Florencia Díaz',\n      'orderAmount': '11',\n    },\n    {\n      'fullName': 'Carolina Altman',\n      'orderAmount': '6',\n    },\n    {\n      'fullName': 'Jose Ramirez',\n      'orderAmount': '3',\n    },\n  ];\n\n  weekTopDrivers = [\n    {\n      'fullName': 'Jose Ramirez',\n      'orderAmount': '34',\n    },\n    {\n      'fullName': 'Alberto Peña',\n      'orderAmount': '32',\n    },\n    {\n      'fullName': 'Carolina Altman',\n      'orderAmount': '29',\n    },\n    {\n      'fullName': 'Florencia Díaz',\n      'orderAmount': '27',\n    },\n    {\n      'fullName': 'Leandro Dominguez',\n      'orderAmount': '21',\n    },\n  ];\n\n  inactiveDrivers = [\n    // {\n    //   'fullName': 'Jose Ramirez',\n    //   'inactivity': '34:23',\n    // },\n    // {\n    //   'fullName': 'Leandro Dominguez',\n    //   'inactivity': '28:02',\n    // },\n    // {\n    //   'fullName': 'Alberto Peña',\n    //   'inactivity': '20:44',\n    // },\n    // {\n    //   'fullName': 'Florencia Díaz',\n    //   'inactivity': '12:54',\n    // },\n    // {\n    //   'fullName': 'Camila Altman',\n    //   'inactivity': '04:01',\n    // },\n  ];\n\n  private auth: AuthService;\n  constructor(private http: HttpClient, private router: Router) {\n    this.auth = new AuthService(this.http, this.router);\n    this.driverService = new DriverService(this.http, this.auth);\n  }\n\n  ngOnInit() {\n    this.driverService.getInactivity().subscribe((res) => {\n      res.splice(5);\n      res.forEach(element => {\n        let hours = element.noDeliveryTime.hours;\n        let minutes = element.noDeliveryTime.minutes;\n        let seconds = element.noDeliveryTime.seconds;\n        let json = {\n          fullName: element.user.name + ' ' + element.user.lastname,\n          hours: hours,\n          minutes: minutes,\n          seconds: seconds,\n        }\n        this.inactiveDrivers.push(json);\n      });\n      setInterval(() => {\n        this.inactiveDrivers.forEach(element => {\n          if(element.seconds < 59){\n            element.seconds++;\n          }\n          else if(element.minutes <59 ){\n            element.seconds = 0;\n            element.minutes++;\n          }\n          else{\n            element.hours++;\n            element.seconds = 0;\n            element.minutes = 0;\n          }\n        })\n      },1000)\n    })\n    this.canvas = document.getElementById('driversPieChart');\n    this.ctx = this.canvas.getContext('2d');\n    let data = [];\n    let label = [];\n    this.driverService.getMostOrdersWeek().subscribe((res) => {\n      res.splice(5);\n      res.forEach(element => {\n        label.push(element.user.name + ' ' + element.user.lastname);\n        data.push(element.count);\n      });\n      let myChart = new Chart(this.ctx, {\n        type: 'doughnut',\n        data: {\n            labels: label,\n            datasets: [{\n                label: 'Orders made',\n                data: data,\n                backgroundColor: [\n                    'orange',\n                    'purple',\n                    'yellow',\n                    'rgba(56, 55, 123, 1)',\n                    'rgba(210, 30, 30, 1)',\n                ],\n                borderWidth: 1\n            }]\n        },\n        options: {\n        responsive: true,\n        }\n      });\n    })\n    this.driverService.getMostOrdersDay().subscribe((res) => {\n      let labels = [];\n      let series = [];\n      res.splice(5);\n      res.forEach(element => {\n        labels.push(element.user.name + ' ' + element.user.lastname);\n        series.push(element.count);\n      });\n      this.barChartData = {\n        series:[series],\n        labels: labels,\n      }\n    })\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DriverStatsRoutingModule } from './driver-stats-routing.module';\nimport { DriverStatsComponent } from './driver-stats.component';\nimport { ChartistModule } from 'ng-chartist';\nimport { ChartsModule } from 'ng2-charts';\nimport { NgxChartsModule } from '@swimlane/ngx-charts';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        DriverStatsRoutingModule,\n        ChartistModule,\n        ChartsModule,\n        NgxChartsModule,\n    ],\n    exports: [],\n    declarations: [\n        DriverStatsComponent\n    ],\n    providers: [],\n})\nexport class DriverStatsModule { }\n"],"sourceRoot":"webpack:///"}